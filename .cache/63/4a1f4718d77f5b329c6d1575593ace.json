{"id":"oFRH","dependencies":[{"name":"/Users/wolfzer44/www/vutiliti/package.json","includedInParent":true,"mtime":1584040983114},{"name":"/Users/wolfzer44/www/vutiliti/node_modules/cls-bluebird/package.json","includedInParent":true,"mtime":1583299135606},{"name":"shimmer","loc":{"line":17,"column":22},"parent":"/Users/wolfzer44/www/vutiliti/node_modules/cls-bluebird/lib/shimCoroutine.js","resolved":"/Users/wolfzer44/www/vutiliti/node_modules/shimmer/index.js"}],"generated":{"js":"\"use strict\";var t=require(\"shimmer\");module.exports=function(r,n,o,i){var u=n.prototype.lastly,e=n.prototype.lastly.__original;function a(t){n.prototype.lastly=e;var r=t();return n.prototype.lastly=u,r}t.wrap(n,r,function(t){return function(n,u){if(\"function\"==typeof n){var e=n;n=function(){var t=e.apply(this,arguments);return[\"next\",\"throw\",\"return\"].forEach(function(r){\"function\"==typeof t[r]&&(t[r]=o.bind(t[r]))}),t}}var p=this;if(\"spawn\"===r&&i)return a(function(){return t.call(p,n,u)});var c=t.call(this,n,u);return\"coroutine\"===r&&i?function(){var t=this,r=arguments;return a(function(){return c.apply(t,r)})}:c}})};"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":17,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":17,"column":0},"generated":{"line":1,"column":17}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":17,"column":0},"generated":{"line":1,"column":19}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":17,"column":0},"generated":{"line":1,"column":27}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":29,"column":0},"generated":{"line":1,"column":38}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":29,"column":0},"generated":{"line":1,"column":45}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":29,"column":0},"generated":{"line":1,"column":53}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":29,"column":0},"generated":{"line":1,"column":62}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":29,"column":0},"generated":{"line":1,"column":64}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":29,"column":0},"generated":{"line":1,"column":66}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":29,"column":0},"generated":{"line":1,"column":68}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":30,"column":0},"generated":{"line":1,"column":71}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":30,"column":0},"generated":{"line":1,"column":75}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":30,"column":0},"generated":{"line":1,"column":77}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":30,"column":0},"generated":{"line":1,"column":79}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":30,"column":0},"generated":{"line":1,"column":89}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":31,"column":0},"generated":{"line":1,"column":96}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":31,"column":0},"generated":{"line":1,"column":98}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":31,"column":0},"generated":{"line":1,"column":100}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":31,"column":0},"generated":{"line":1,"column":110}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":31,"column":0},"generated":{"line":1,"column":117}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":79,"column":0},"generated":{"line":1,"column":128}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":79,"column":0},"generated":{"line":1,"column":137}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":79,"column":0},"generated":{"line":1,"column":139}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":80,"column":0},"generated":{"line":1,"column":142}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":80,"column":0},"generated":{"line":1,"column":144}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":80,"column":0},"generated":{"line":1,"column":154}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":80,"column":0},"generated":{"line":1,"column":161}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":81,"column":0},"generated":{"line":1,"column":163}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":81,"column":0},"generated":{"line":1,"column":167}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":81,"column":0},"generated":{"line":1,"column":169}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":83,"column":0},"generated":{"line":1,"column":173}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":82,"column":0},"generated":{"line":1,"column":180}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":82,"column":0},"generated":{"line":1,"column":182}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":82,"column":0},"generated":{"line":1,"column":192}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":82,"column":0},"generated":{"line":1,"column":199}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":83,"column":0},"generated":{"line":1,"column":201}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":34,"column":0},"generated":{"line":1,"column":203}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":34,"column":0},"generated":{"line":1,"column":205}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":34,"column":0},"generated":{"line":1,"column":210}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":34,"column":0},"generated":{"line":1,"column":212}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":34,"column":0},"generated":{"line":1,"column":214}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":34,"column":0},"generated":{"line":1,"column":223}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":35,"column":0},"generated":{"line":1,"column":226}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":35,"column":0},"generated":{"line":1,"column":233}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":35,"column":0},"generated":{"line":1,"column":242}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":35,"column":0},"generated":{"line":1,"column":244}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":38,"column":0},"generated":{"line":1,"column":247}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":38,"column":0},"generated":{"line":1,"column":250}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":38,"column":0},"generated":{"line":1,"column":269}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":38,"column":0},"generated":{"line":1,"column":271}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":40,"column":0},"generated":{"line":1,"column":272}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":40,"column":0},"generated":{"line":1,"column":276}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":40,"column":0},"generated":{"line":1,"column":278}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":41,"column":0},"generated":{"line":1,"column":280}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":41,"column":0},"generated":{"line":1,"column":282}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":43,"column":0},"generated":{"line":1,"column":293}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":43,"column":0},"generated":{"line":1,"column":297}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":43,"column":0},"generated":{"line":1,"column":299}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":43,"column":0},"generated":{"line":1,"column":301}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":43,"column":0},"generated":{"line":1,"column":307}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":43,"column":0},"generated":{"line":1,"column":312}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":51,"column":0},"generated":{"line":1,"column":323}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":47,"column":0},"generated":{"line":1,"column":329}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":47,"column":0},"generated":{"line":1,"column":330}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":47,"column":0},"generated":{"line":1,"column":337}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":47,"column":0},"generated":{"line":1,"column":345}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":47,"column":0},"generated":{"line":1,"column":355}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":47,"column":0},"generated":{"line":1,"column":363}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":47,"column":0},"generated":{"line":1,"column":372}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":48,"column":0},"generated":{"line":1,"column":375}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":48,"column":0},"generated":{"line":1,"column":394}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":48,"column":0},"generated":{"line":1,"column":396}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":48,"column":0},"generated":{"line":1,"column":401}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":48,"column":0},"generated":{"line":1,"column":403}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":48,"column":0},"generated":{"line":1,"column":406}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":48,"column":0},"generated":{"line":1,"column":408}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":48,"column":0},"generated":{"line":1,"column":413}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":48,"column":0},"generated":{"line":1,"column":415}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":51,"column":0},"generated":{"line":1,"column":422}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":57,"column":0},"generated":{"line":1,"column":425}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":57,"column":0},"generated":{"line":1,"column":429}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":57,"column":0},"generated":{"line":1,"column":431}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":58,"column":0},"generated":{"line":1,"column":436}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":58,"column":0},"generated":{"line":1,"column":439}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":58,"column":0},"generated":{"line":1,"column":449}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":58,"column":0},"generated":{"line":1,"column":452}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":59,"column":0},"generated":{"line":1,"column":454}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":59,"column":0},"generated":{"line":1,"column":461}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":59,"column":0},"generated":{"line":1,"column":463}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":60,"column":0},"generated":{"line":1,"column":474}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":60,"column":0},"generated":{"line":1,"column":481}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":60,"column":0},"generated":{"line":1,"column":483}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":60,"column":0},"generated":{"line":1,"column":488}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":60,"column":0},"generated":{"line":1,"column":490}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":60,"column":0},"generated":{"line":1,"column":492}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":64,"column":0},"generated":{"line":1,"column":497}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":64,"column":0},"generated":{"line":1,"column":501}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":64,"column":0},"generated":{"line":1,"column":503}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":64,"column":0},"generated":{"line":1,"column":505}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":64,"column":0},"generated":{"line":1,"column":510}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":64,"column":0},"generated":{"line":1,"column":515}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":64,"column":0},"generated":{"line":1,"column":517}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":66,"column":0},"generated":{"line":1,"column":520}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":66,"column":0},"generated":{"line":1,"column":526}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":66,"column":0},"generated":{"line":1,"column":540}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":66,"column":0},"generated":{"line":1,"column":543}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":67,"column":0},"generated":{"line":1,"column":545}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":68,"column":0},"generated":{"line":1,"column":556}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":68,"column":0},"generated":{"line":1,"column":560}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":68,"column":0},"generated":{"line":1,"column":562}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":68,"column":0},"generated":{"line":1,"column":567}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":68,"column":0},"generated":{"line":1,"column":569}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":69,"column":0},"generated":{"line":1,"column":579}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":69,"column":0},"generated":{"line":1,"column":586}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":69,"column":0},"generated":{"line":1,"column":588}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":70,"column":0},"generated":{"line":1,"column":599}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":70,"column":0},"generated":{"line":1,"column":606}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":70,"column":0},"generated":{"line":1,"column":608}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":70,"column":0},"generated":{"line":1,"column":614}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":70,"column":0},"generated":{"line":1,"column":616}},{"source":"../node_modules/cls-bluebird/lib/shimCoroutine.js","original":{"line":75,"column":0},"generated":{"line":1,"column":622}}],"sources":{"../node_modules/cls-bluebird/lib/shimCoroutine.js":"'use strict';\n\n/*\n * cls-bluebird\n * Function to shim `Promise.coroutine`\n *\n * Works by binding the `.next()` and `.throw()` methods of generator to CLS context\n * at time when coroutine is executed.\n *\n * In bluebird v3.x, running the coroutine internally calls `.lastly()` if cancellation is enabled.\n * To prevent unnecessary binding of the `.lastly()` callback to CLS context, this patch\n * temporarily disables the patch on `Promise.prototype.lastly`.\n * NB This patch could break if bluebird internals change, but this is covered by the tests.\n */\n\n// Modules\nvar shimmer = require('shimmer');\n\n// Exports\n\n/**\n * Patch `Promise.coroutine` or `Promise.spawn` to maintain current CLS context after all `yield` statements.\n *\n * @param {string} methodName - method name (either 'coroutine' or 'spawn')\n * @param {Function} Promise - Bluebird Promise constructor to patch\n * @param {Object} ns - CLS namespace to bind callbacks to\n * @returns {undefined}\n */\nmodule.exports = function(methodName, Promise, ns, v3) {\n\tvar lastlyPatched = Promise.prototype.lastly,\n\t\tlastlyOriginal = Promise.prototype.lastly.__original;\n\n\t// Patch method\n\tshimmer.wrap(Promise, methodName, function(original) {\n\t\treturn function(generatorFunction, options) {\n\t\t\t// NB If `generatorFunction` is not a function, do not alter it.\n\t\t\t// Pass value directly to bluebird which will throw an error.\n\t\t\tif (typeof generatorFunction === 'function') {\n\t\t\t\t// Create proxy generator function\n\t\t\t\tvar generatorFunctionOriginal = generatorFunction;\n\t\t\t\tgeneratorFunction = function() {\n\t\t\t\t\t// Create generator from generator function\n\t\t\t\t\tvar generator = generatorFunctionOriginal.apply(this, arguments);\n\n\t\t\t\t\t// Bind `.next()`, '.throw()' and `.return()` to current CLS context.\n\t\t\t\t\t// NB CLS context is from when coroutine is called, not when created.\n\t\t\t\t\t['next', 'throw', 'return'].forEach(function(name) {\n\t\t\t\t\t\tif (typeof generator[name] === 'function') generator[name] = ns.bind(generator[name]);\n\t\t\t\t\t});\n\n\t\t\t\t\treturn generator;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Temporarily remove patch from `Promise.prototype.lastly` in bluebird v3\n\t\t\t// to avoid unnecessary binding to CLS context.\n\t\t\tvar self = this;\n\t\t\tif (methodName === 'spawn' && v3) {\n\t\t\t\treturn tempPatchLastly(function() {\n\t\t\t\t\treturn original.call(self, generatorFunction, options);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar fn = original.call(this, generatorFunction, options);\n\n\t\t\tif (methodName === 'coroutine' && v3) {\n\t\t\t\treturn function() {\n\t\t\t\t\tvar self = this, args = arguments;\n\t\t\t\t\treturn tempPatchLastly(function() {\n\t\t\t\t\t\treturn fn.apply(self, args);\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t};\n\t});\n\n\tfunction tempPatchLastly(fn) {\n\t\tPromise.prototype.lastly = lastlyOriginal;\n\t\tvar res = fn();\n\t\tPromise.prototype.lastly = lastlyPatched;\n\t\treturn res;\n\t}\n};\n"},"lineCount":null}},"error":null,"hash":"dad944410ff681d66f1b78eea3e410f1","cacheData":{"env":{}}}