{"id":"server.js","dependencies":[{"name":"/Users/wolfzer44/www/vutiliti/package.json","includedInParent":true,"mtime":1584041049154},{"name":"./models/Random","loc":{"line":5,"column":19},"parent":"/Users/wolfzer44/www/vutiliti/src/server.js","resolved":"/Users/wolfzer44/www/vutiliti/src/models/Random.js"},{"name":"./utils/utils","loc":{"line":6,"column":23},"parent":"/Users/wolfzer44/www/vutiliti/src/server.js","resolved":"/Users/wolfzer44/www/vutiliti/src/utils/utils.js"},{"name":"./env","loc":{"line":7,"column":16},"parent":"/Users/wolfzer44/www/vutiliti/src/server.js","resolved":"/Users/wolfzer44/www/vutiliti/src/env.js"},{"name":"./database","loc":{"line":9,"column":7},"parent":"/Users/wolfzer44/www/vutiliti/src/server.js","resolved":"/Users/wolfzer44/www/vutiliti/src/database/index.js"},{"name":"./routes","loc":{"line":10,"column":19},"parent":"/Users/wolfzer44/www/vutiliti/src/server.js","resolved":"/Users/wolfzer44/www/vutiliti/src/routes.js"}],"generated":{"js":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _nodeCron = _interopRequireDefault(require(\"node-cron\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _Random = _interopRequireDefault(require(\"./models/Random\"));\n\nvar utils = _interopRequireWildcard(require(\"./utils/utils\"));\n\nvar _env = _interopRequireDefault(require(\"./env\"));\n\nrequire(\"./database\");\n\nvar _routes = _interopRequireDefault(require(\"./routes\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst app = (0, _express.default)();\napp.use((0, _cors.default)());\napp.use(_express.default.json());\napp.use(_routes.default);\n\n_nodeCron.default.schedule('* * * * *', async function () {\n  const currentTime = utils.formatDate(new Date());\n  const response = await _Random.default.findAll({\n    where: {\n      start_time: currentTime\n    }\n  });\n\n  if (response.length > 0) {\n    response.map(item => {\n      const startTime = (0, _moment.default)(new Date(item.start_time));\n      const endTime = (0, _moment.default)(new Date(item.end_time));\n      const diffTime = endTime.diff(startTime, 'milliseconds');\n      utils.createTimer(item.id, diffTime);\n    });\n  }\n});\n\nconst PORT = (0, _env.default)().server.port;\napp.listen(PORT, () => {\n  console.log(`Server running on port: ${PORT}`);\n});"},"sourceMaps":null,"error":null,"hash":"fb09b0080fb05adbd797f97656cc3c08","cacheData":{"env":{}}}